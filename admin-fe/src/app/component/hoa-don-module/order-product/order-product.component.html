<!-- Order product -->
<div class="row gutters">
  <div class="col-sm-12">
    <div class="card">
      <div class="card-header d-flex">
        <h4 class="mr-auto">Thông tin sản phẩm</h4>
        <div class="ml-auto">
          <button
            type="button"
            class="btn btn-primary"
            [disabled]="loaiHoaDon == 'TAI_QUAY'"
          >
            <i class="fa-solid fa-plus"></i>
            Thêm sản phẩm
          </button>
        </div>
      </div>

      <div class="card-body">
        <table
          id="rowSelection_wrapper"
          class="table dataTables_wrapper dt-bootstrap4 no-footer rounded"
        >
          <div class="row">
            <div class="col-sm-12">
              <table
                class="table table-striped table-bordered dataTable no-footer"
                role="grid"
              >
                <thead>
                  <tr>
                    <th>STT</th>
                    <th>Hình ảnh</th>
                    <th>Tên sản phẩm</th>
                    <th>Size</th>
                    <th>Đơn giá</th>
                    <th>Số lượng</th>
                    <th>Tổng tiền</th>
                    <th>Hành động</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let hdct of hoaDonChiTiets; index as i">
                    <td>{{ i + 1 }}</td>
                    <td>file_name</td>
                    <td>tenSanPham</td>
                    <td>size</td>
                    <td>
                      {{ hdct.giaBan | currency : "đ " : "symbol" : "1.0-0" }}
                    </td>
                    <td>
                      <div class="input-group row">
                        <span class="input-group-prepend col-2">
                          <button
                            type="button"
                            class="btn btn-outline-secondary btn-number"
                            (click)="minus(hdct)"
                          >
                            <span class="fa fa-minus"></span>
                          </button>
                        </span>
                        <input
                          type="number"
                          min="1"
                          class="form-control input-number col-3"
                          [(ngModel)]="hdct.soLuong"
                          (change)="quantityChange(hdct)"
                        />
                        <span class="input-group-append col-2">
                          <button
                            type="button"
                            class="btn btn-outline-secondary btn-number"
                            (click)="plus(hdct)"
                          >
                            <span class="fa fa-plus"></span>
                          </button>
                        </span>
                      </div>
                    </td>
                    <td>
                      {{
                        hdct.soLuong * hdct.giaBan
                          | currency : "đ " : "symbol" : "1.0-0"
                      }}
                    </td>
                    <td>
                      <button
                        class="btn btn-outline-light btn-rounded"
                        [disabled]="loaiHoaDon == 'TAI_QUAY'"
                        (click)="delete(hdct.id)"
                      >
                        <i class="fa-solid fa-trash text-danger"></i>
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
              <div class="row gutters">
                <div class="col-md-6 col-sm-12">
                  <table class="table plain" *ngIf="phieuGiamGia != null">
                    <tbody>
                      <tr>
                        <td>
                          <p class="text-left">Phiếu giảm giá:</p>
                          <p class="text-left">Giá trị:</p>
                        </td>
                        <td>
                          <p class="text-left">
                            {{ phieuGiamGia.maPhieuGiamGia }}
                          </p>
                          <p class="text-left">
                            {{
                              phieuGiamGia.giaTri
                                | currency : "đ " : "symbol" : "1.0-0"
                            }}
                          </p>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div class="col-md-6 col-sm-12">
                  <table class="table plain">
                    <tbody>
                      <tr>
                        <td>
                          <p class="text-right">Tổng tiền hàng</p>
                          <p class="text-right">Giảm giá</p>
                          <p class="text-right">Phí vận chuyển</p>
                          <p class="text-right">Tổng tiền</p>
                        </td>
                        <td>
                          <p class="text-right">
                            <strong>{{
                              tongTien | currency : "đ " : "symbol" : "1.0-0"
                            }}</strong>
                          </p>

                          <p class="text-right">
                            <strong>{{
                              tienGiam | currency : "đ " : "symbol" : "1.0-0"
                            }}</strong>
                          </p>
                          <p class="text-right">
                            <input
                              type="number"
                              [(ngModel)]="phiVanChuyen"
                              (change)="onPhiVanChuyenChange()"
                            />
                          </p>
                          <hr
                            style="
                              border: 0;
                              height: 2px;
                              background-color: #000;
                            "
                          />
                          <p class="text-right text-danger">
                            <strong>{{
                              tongTien - tienGiam + phiVanChuyen
                                | currency : "đ " : "symbol" : "1.0-0"
                            }}</strong>
                          </p>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </table>
      </div>
    </div>
  </div>
</div>
<!--End Order product -->
