<app-main-heading
  [icon]="icon"
  [mainHeading]="mainHeading"
  [title]="title"
></app-main-heading>

<!-- Form start -->
<div class="row gutters mt-3">
  <div class="col-sm-12">
    <div class="card">
      <div class="card-header">
        <h4 class="float-md-left">Thêm nhân viên</h4>
        <button
          class="btn btn-primary btn-rounded float-md-right"
          id="add-button"
          data-toggle="modal"
          data-target="#formQRCode"
          data-whatever="@mdo"
        >
          <i class="fa-solid fa-qrcode"></i> Quét QR CCCD
        </button>
      </div>
      <div class="card-body">
        <form [formGroup]="addForm">
          <div class="row">
            <!-- <div class="form-group col-md-4">
              Hình ảnh
              <div class="input-group mb-3">
                <div class="input-group-prepend"></div>
                <div class="custom-file">
                  <input
                    type="file"
                    class="custom-file-input"
                    id="inputGroupFile03"
                  />
                  <label class="custom-file-label" for="inputGroupFile03"
                    >Choose file</label
                  >
                </div>
              </div>
            </div> -->
            <div class="col-md-4">
              <div class="form-group">
                Họ tên
                <input
                  type="text"
                  class="form-control"
                  placeholder="Họ tên"
                  [ngClass]="
                    addForm.get('hoTen').invalid && addForm.get('hoTen').touched
                      ? 'is-invalid'
                      : ''
                  "
                  formControlName="hoTen"
                />
                <div class="invalid-feedback">Không được bỏ trống</div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group">
                Ngày sinh
                <input
                  type="date"
                  class="form-control"
                  placeholder="Ngày sinh"
                  [ngClass]="
                    addForm.get('ngaySinh').invalid &&
                    addForm.get('ngaySinh').touched
                      ? 'is-invalid'
                      : ''
                  "
                  formControlName="ngaySinh"
                />
                <div class="invalid-feedback">Không được bỏ trống</div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-4">
              <div class="form-group">
                Số điện thoại
                <input
                  type="text"
                  class="form-control"
                  placeholder="Số điện thoại"
                  [ngClass]="
                    addForm.get('sdt').invalid && addForm.get('sdt').touched
                      ? 'is-invalid'
                      : ''
                  "
                  formControlName="sdt"
                />
                <div class="invalid-feedback">SĐT không hợp lệ</div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group">
                Email
                <input
                  type="email"
                  class="form-control"
                  placeholder="Email"
                  [ngClass]="
                    addForm.get('email').invalid && addForm.get('email').touched
                      ? 'is-invalid'
                      : ''
                  "
                  formControlName="email"
                />
                <div class="invalid-feedback">Email không hợp lệ</div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group">
                <label class="form-label">Giới tính </label> <br />
                <div class="form-check form-check-inline">
                  <input
                    class="form-check-input"
                    type="radio"
                    value="true"
                    formControlName="gioiTinh"
                    [checked]="true"
                  />
                  <label class="form-check-label"> Nam </label>
                </div>
                <div class="form-check form-check-inline">
                  <input
                    class="form-check-input"
                    type="radio"
                    value="false"
                    formControlName="gioiTinh"
                  />
                  <label class="form-check-label"> Nữ </label>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-4">
              <div class="form-group">
                Địa chỉ
                <input
                  type="text"
                  class="form-control"
                  placeholder="Địa chỉ"
                  [ngClass]="
                    addForm.get('diaChi').invalid &&
                    addForm.get('diaChi').touched
                      ? 'is-invalid'
                      : ''
                  "
                  formControlName="diaChi"
                />
                <div class="invalid-feedback">Không được bỏ trống</div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group">
                Tên đăng nhập
                <input
                  type="text"
                  class="form-control"
                  placeholder="Tên đăng nhập"
                  [ngClass]="
                    addForm.get('tenDangNhap').invalid &&
                    addForm.get('tenDangNhap').touched
                      ? 'is-invalid'
                      : ''
                  "
                  formControlName="tenDangNhap"
                />
                <div class="invalid-feedback">Không được bỏ trống</div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group">
                Mật khẩu
                <input
                  type="password"
                  class="form-control"
                  placeholder="Mật khẩu"
                  [ngClass]="
                    addForm.get('matKhau').invalid &&
                    addForm.get('matKhau').touched
                      ? 'is-invalid'
                      : ''
                  "
                  formControlName="matKhau"
                />
                <div class="invalid-feedback">Không được bỏ trống</div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-4">
              <div class="form-group">
                CCCD
                <input
                  type="text"
                  class="form-control"
                  placeholder="CCCD"
                  [ngClass]="
                    addForm.get('cccd').invalid && addForm.get('cccd').touched
                      ? 'is-invalid'
                      : ''
                  "
                  formControlName="cccd"
                />
                <div class="invalid-feedback">Không được bỏ trống</div>
                <div
                  *ngIf="addForm.get('cccd').errors?.minlength"
                  class="invalid-feedback"
                >
                  The full name must be atleast 5 letters long
                </div>
              </div>
            </div>
          </div>

          <div class="text-right">
            <button
              class="btn btn-primary btn-rounded btn-reload-filter"
              (click)="reloadForm()"
            >
              <i class="fa-solid fa-arrows-rotate"></i>
            </button>

            <button
              type="submit"
              class="btn btn-success btn-rounded mx-2"
              [disabled]="addForm.invalid"
              (click)="addNhanVien()"
            >
              <i class="fa-solid fa-plus"></i> Thêm
            </button>
            <button
              type="button"
              class="btn btn-secondary btn-rounded"
              routerLink="/nhan-vien/ds-nhan-vien"
            >
              Back
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Form ends -->

<div
  class="modal fade"
  id="formQRCode"
  tabindex="-1"
  role="dialog"
  aria-labelledby="formQR"
  aria-hidden="true"
>
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button
          id="closeFormQRCode"
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <ngx-scanner-qrcode
          #action="scanner"
          (event)="onEvent($event, action)"
        ></ngx-scanner-qrcode>
        <div class="text-center">
          <p *ngIf="action.isLoading">
            <i class="fa-solid fa-spinner fa-spin"></i> Loading...
          </p>
          <button
            class="btn btn-primary btn-rounded"
            (click)="action.isStart ? action.stop() : action.start()"
          >
            {{ action.isStart ? "Stop" : "Start" }}
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
