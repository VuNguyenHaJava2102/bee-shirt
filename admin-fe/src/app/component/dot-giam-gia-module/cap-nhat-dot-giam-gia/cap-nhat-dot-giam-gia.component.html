<app-main-heading
  [icon]="icon"
  [mainHeading]="mainHeading"
  [title]="tittle"
></app-main-heading>

<div class="row gutters pt-3">
  <!-- Form -->
  <div class="col col-sm-5 col-md-4">
    <app-form
      [formButton]="formButton"
      [formHeader]="formHeader"
      [modalTitle]="'Xác Nhận Cập Nhật'"
      [dotGiamGiaRequest]="dotGiamGiaUpdateRequest"
      [typeForm]="typeForm"
      [modalAction]="'Cập nhật'"
      [modalMessage]="'Bạn chắc chắn muốn cập nhật đợt khuyến mại?'"
    ></app-form>
  </div>
  <!-- Tables -->
  <div class="col col-md-8">
    <div class="row gutters">
      <div class="col-sm-12">
        <div class="card">
          <div>
            <h2 class="card-header">Danh Sách Sản Phẩm</h2>
          </div>
          <div class="card-body">
            <table
              id="rowSelection_wrapper"
              class="table dataTables_wrapper dt-bootstrap5"
            >
              <div class="form-group d-flex p-2 justify-content-end">
                <label class="col-form-label">Tìm Kiếm:</label>
                <input
                  type="text"
                  class="form-control col-md-2 ml-1"
                  [placeholder]="'Mã..Tên..'"
                />
              </div>
              <div class="row">
                <div class="col-sm-12">
                  <table
                    id="rowSelection"
                    class="table table-striped table-bordered dataTable no-footer table-hover"
                    role="grid"
                    aria-describedby="rowSelection_info"
                  >
                    <thead>
                      <tr class="table" role="row">
                        <th *ngFor="let object of tHeadProduct">
                          {{ object }}
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <ng-container
                        *ngIf="
                          dataSanPham && dataSanPham.length > 0;
                          else noDataTemplate
                        "
                      >
                        <tr
                          role="row"
                          class="odd"
                          *ngFor="let object of dataSanPham"
                        >
                          <td class="sorting_1">
                            <input
                              [checked]="
                                this.listIdSanPham?.includes(+object.id)
                              "
                              [disabled]="
                                object.trangThai === false ? true : false
                              "
                              type="checkbox"
                              (change)="setListIdSanPham(object.id)"
                            />
                          </td>
                          <td>{{ object.ma }}</td>
                          <td>{{ object.ten }}</td>
                          <td>
                            <button
                              class="{{
                                object.trangThai === true
                                  ? 'btn btn-success btn-rounded'
                                  : 'btn btn-danger btn-rounded'
                              }}"
                            >
                              {{
                                object.trangThai === true
                                  ? "Đang Bán"
                                  : "Ngừng Bán"
                              }}
                            </button>
                          </td>
                        </tr>
                      </ng-container>
                    </tbody>
                  </table>
                </div>
              </div>
              <div class="cart-footer d-flex justify-content-between">
                <div class="d-flex">
                  <label class="col-md-8">Hiển Thị</label>
                  <select class="custom-select my-1 mr-sm-2 col-md-9">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="15">15</option>
                  </select>
                </div>
                <nav aria-label="Page navigation example">
                  <ul class="pagination">
                    <li>
                      <a class="page-link pointer"></a>
                    </li>
                  </ul>
                </nav>
              </div>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="row gutters">
      <div class="col-sm-12">
        <div class="card">
          <div>
            <h2 class="card-header">Danh Sách Chi Tiết Sản Phẩm</h2>
          </div>
          <div class="card-body">
            <table
              id="rowSelection_wrapper"
              class="table dataTables_wrapper dt-bootstrap5"
            >
              <div class="form-group d-flex p-2 justify-content-end">
                <label class="col-form-label">Tìm Kiếm:</label>
                <input
                  type="text"
                  class="form-control col-md-2 ml-1"
                  [placeholder]="'Mã..Tên Sản Phẩm'"
                />
              </div>
              <div class="row">
                <div class="col-sm-12">
                  <table
                    id="rowSelection"
                    class="table table-striped table-bordered dataTable no-footer table-hover"
                    role="grid"
                    aria-describedby="rowSelection_info"
                  >
                    <thead>
                      <tr class="table" role="row">
                        <th *ngFor="let object of tHeadProducts">
                          {{ object }}
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <ng-container
                        *ngIf="
                          dataSanPhamChiTiet && dataSanPhamChiTiet.length > 0;
                          else noDataTemplate
                        "
                      >
                        <tr
                          role="row"
                          class="odd p-3"
                          *ngFor="let object of dataSanPhamChiTiet"
                        >
                          <td class="sorting_1">
                            <input
                              [checked]="
                                this.listIdSanPhamChiTiet?.includes(+object.id)
                              "
                              [disabled]="
                                object.trangThai === false ? true : false
                              "
                              type="checkbox"
                              (click)="setListIdSanPhamChiTiet(object.id)"
                            />
                            {{ object.id }}
                          </td>
                          <td>NULL</td>
                          <td>{{ object.maSanPham }}</td>
                          <td>{{ object.tenSanPham }}</td>
                          <td>{{ object.tenMauSac }}</td>
                          <td>
                            <button
                              class="{{
                                object.trangThai === true
                                  ? 'btn btn-success btn-rounded'
                                  : 'btn btn-danger btn-rounded'
                              }}"
                            >
                              {{
                                object.trangThai === true
                                  ? "Đang Bán"
                                  : "Ngừng Bán"
                              }}
                            </button>
                          </td>
                          <td>
                            <button class="btn btn-outline-light btn-rounded">
                              <i
                                class="fa-solid fa-circle-info fa-xl"
                                style="color: #74c0fc"
                              ></i>
                            </button>
                          </td>
                        </tr>
                      </ng-container>
                    </tbody>
                  </table>
                </div>
              </div>
              <div class="cart-footer d-flex justify-content-between">
                <div class="d-flex">
                  <label class="col-md-8">Hiển Thị</label>
                  <select class="custom-select my-1 mr-sm-2 col-md-9">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="15">15</option>
                  </select>
                </div>
                <nav aria-label="Page navigation example">
                  <ul class="pagination">
                    <li>
                      <a class="page-link pointer"></a>
                    </li>
                  </ul>
                </nav>
              </div>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #noDataTemplate>
  <tr>
    <td [colSpan]="tHeadProducts.length" class="text-center">
      Úi Bạn Ơi Không Có Dữ Liệu!!!
    </td>
  </tr>
</ng-template>
